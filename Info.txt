╔════════════════════════════════════════════════════╗
║           DEV_DB_Cloner — 測試資料庫複製工具       ║
╚════════════════════════════════════════════════════╝

  版本 (Version):  v1.1.0  (2026-02-11)
  作者 (Author):   icekimo with Antigravity
  授權 (License):  Internal Use Only

──────────────────────────────────────────────────────
  功能概述 (Overview)
──────────────────────────────────────────────────────

  本工具用於將 SQL Server 資料庫複製到目標伺服器，
  並在複製過程中自動進行 PII（個人識別資訊）去敏化處理。

  This tool replicates SQL Server databases to a target
  server with automatic PII anonymization during the copy.

──────────────────────────────────────────────────────
  操作流程 (Workflow)
──────────────────────────────────────────────────────

  1. 專案選擇 (Project Selector)
     → 新建 / 複製 / 開啟 / 刪除 專案

  2. 資料表選擇 (Table Selector)
     → 勾選欲複製的資料表
     → 設定資料篩選條件 (WHERE filters)
     → 設定 PII 去敏化規則

  3. 執行複製 (Replication)
     → 批次讀取來源資料
     → 套用去敏化處理
     → 寫入目標資料庫

──────────────────────────────────────────────────────
  快捷鍵 (Keyboard Shortcuts)
──────────────────────────────────────────────────────

  專案選擇畫面:
    N ..... 新建專案          C ..... 複製專案
    O ..... 開啟專案          D ..... 刪除專案
    I ..... 匯入設定(JSON)    E ..... 匯出設定(JSON)
    ? ..... 說明(本頁)        X ..... 離開程式

  資料表選擇畫面:
    Space . 選取/取消        A .... 全選/取消全選
    F ..... 編輯篩選條件      P .... 編輯 PII 規則
    O ..... 專案設定          S ..... 儲存設定
    G ..... 開始複製          Q ..... 離開
    Ctrl+O  返回專案選擇      Tab ..... 切換區域

──────────────────────────────────────────────────────
  去敏化函數 (Anonymization Functions)
──────────────────────────────────────────────────────

  obfuscate_name .......... 中文姓名替換 (2/3/4 字)
  obfuscate_spouse_name ... 配偶姓名替換 (與本人不同)
  obfuscate_address ....... 地址替換 (保留結構)
  obfuscate_phone ......... 電話遮罩 (後5碼)
  anonymize_id ............ 身分證字號替換
  clear_content ........... 清除欄位內容

──────────────────────────────────────────────────────
  匯入/匯出格式 (Import/Export Format)
──────────────────────────────────────────────────────

  匯出時會產生兩個 JSON 檔案：
    {專案名}_filters.json .............. 資料篩選條件
    {專案名}_sensitive_columns.json .... PII 去敏化規則

  匯入時請指定檔案名稱前綴（不含 _filters / _sensitive_columns），
  程式會自動讀取對應的兩個檔案。

──────────────────────────────────────────────────────
  環境需求 (Prerequisites)
──────────────────────────────────────────────────────

  • Python 3.9+
  • pymssql >= 2.2  (透過 TDS 協議直連 SQL Server)
  • 執行檔模式下無需安裝任何額外套件

──────────────────────────────────────────────────────
  v1.1.0 更新紀錄
──────────────────────────────────────────────────────

  • 將 pyodbc 替換為 pymssql，實現零依賴靜態編譯
  • 新增專案匯入/匯出功能 (JSON ↔ SQLite)
  • 新增說明頁面 (Info.txt)
  • 修復確認畫面按 Y 後迴圈回專案選擇的問題

──────────────────────────────────────────────────────
  v1.0.0 初始版本
──────────────────────────────────────────────────────

  • 互動式 TUI 資料表選擇
  • 進階去敏化引擎 (姓名/地址/電話/身分證)
  • 基於日期的鹽值確保每日結果一致
  • 批次複製搭配 tqdm 進度條
  • 每日日誌檔 (YYYYMMDD_Clone.log)

═══════════════════════════════════════════════════════
  按 Q 或 ESC 關閉本說明
═══════════════════════════════════════════════════════
